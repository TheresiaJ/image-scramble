(function(){var t=function(t,h,e,i){var r,n=Math.ceil(t.width/h)*Math.ceil(t.height/h),a=[];for(r=0;n>r;r++)a.push(r);if(i)var g=i.ctx;else{var o=document.createElement("canvas"),g=o.getContext("2d");o.width=t.width,o.height=t.height}var l=Math.ceil(t.width/h),s=(t.height/h,{}),d=function(){var e,i={};for(e=0;n>e;e++){var r={},a=parseInt(e/l),g=e-a*l;r.x=g*h,r.y=a*h,r.width=h-(r.x+h<=t.width?0:r.x+h-t.width),r.height=h-(r.y+h<=t.height?0:r.y+h-t.height),i[r.width+"-"+r.height]||(i[r.width+"-"+r.height]=[]),i[r.width+"-"+r.height].push(r)}return i},c=function(t){if(1==t.length)return 1;for(var h="init",e=0;e<t.length;e++)if("init"==h&&(h=t[e].y),h!=t[e].y)return e;return e},f=function(t){var h={};return h.slices=t.length,h.cols=c(t),h.rows=t.length/h.cols,h.width=t[0].width*h.cols,h.height=t[0].height*h.rows,h.x=t[0].x,h.y=t[0].y,h},s=d();for(var u in s){var r,w=f(s[u]),v=[];for(r=0;r<s[u].length;r++)v.push(r);for(v=shuffleSeed.shuffle(v,e),r=0;r<s[u].length;r++){var x=v[r],y=parseInt(x/w.cols),p=x-y*w.cols,m=p*s[u][r].width,I=y*s[u][r].height;g.drawImage(t,w.x+m,w.y+I,s[u][r].width,s[u][r].height,s[u][r].x,s[u][r].y,s[u][r].width,s[u][r].height)}}return i?i:o};"undefined"!=typeof exports?module.exports=t:this.unscrambleImg=t}).call(this);